# How to use dev_server

## config.json
The config.json file (example in this folder), has to be in the same location as the executable server(.exe).
This allows for the sensors that are generated by the test server to be customized.
If values are changed on the dev-server, they are not saved in the config file, each time
the dev server is restarted the setting will be loaded again from config.json
### Ranges
Ranges are defined with a min and a max
```json
{
  "min": -5,
  "max": 10
}
```
The server picks a random number(inclusive) between these two values and returns it for the given property(moisture, temperature, humidity)
### Optional environment sensors
The set of ranges for enviromental sensors is optional, if it is not present the server will return null for temperature and humidity

## Static files
All static files should be put into a `/static` folder, relative to the location of the executable.
The default indes ("/") redirects to `/static/index.html`. Inside of the static
 folder files are server from their location(To get the file at `/static/img/favicon.ico`) the adress localhost:8000/static/img/favicon.ico has to be referenced. 
# API
This section describes the endpoints that are available besides the static fileserver in the section above.

## GET

### `/sensors`
returns an array with all existing ids
```json
  [
    4, 6, 8, 9
  ]
```

### `/sensor/<id>`
returns information on a single sensor, depending on the sensor either values or null for temperature and humidity
```json
{
  "id": 3,
  "watering_time": 60,
  "backoff_time": 30,
  "threshold": 1800,
  "moisture": 1900,
  "temperature": null,
  "humidity": null 
}
```
### `/errors`
returns a random set off errors from the errors defined in errors.json
the length of the array is defined by the range defined in errors.json
```json
  [1101, 6943]
```

## POST

### `/sensor, data="<sensor>"`
if the sensor that was sent exists sets the values delivered, except id and then returns status 200
if the sensor does not exist return status 404
example data to post:
```json
  {
    "id": 3,
    "watering_time": 16,
    "backoff_time": 60,
    "threshold": 100
  }
```
